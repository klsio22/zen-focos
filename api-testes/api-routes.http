
### ZenFocos API - Requests de teste
### Documenta√ß√£o completa: http://localhost:3000/api/docs

# Base URL
@baseUrl = http://localhost:3000

# Vari√°veis - ser√£o preenchidas ap√≥s executar os requests
@accessToken = your-jwt-token-here
@userId = 1
@taskId = 1
@sessionId = 1

###############################################################################
### üîê AUTENTICA√á√ÉO (Sem vers√£o)
###############################################################################

### 1. Registrar novo usu√°rio
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "teste@example.com",
  "password": "senha123",
  "name": "Usu√°rio Teste"
}

### 2. Login (obter token JWT)
# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "teste@example.com",
  "password": "senha123"
}

###############################################################################
### ‚úÖ TASKS (v1) - Requer autentica√ß√£o JWT
###############################################################################

### 3. Listar todas as tarefas
GET {{baseUrl}}/v1/tasks
Authorization: Bearer {{accessToken}}

### 4. Listar tarefas agrupadas por status
GET {{baseUrl}}/v1/tasks/grouped
Authorization: Bearer {{accessToken}}

### 5. Buscar tarefa espec√≠fica por ID
GET {{baseUrl}}/v1/tasks/{{taskId}}
Authorization: Bearer {{accessToken}}

### 6. Criar nova tarefa
# @name createTask
POST {{baseUrl}}/v1/tasks
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "Estudar NestJS",
  "description": "Revisar m√≥dulos, controllers e services",
  "estimatedPomodoros": 4
}

### 7. Atualizar tarefa completa (PUT)
PUT {{baseUrl}}/v1/tasks/{{taskId}}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "Estudar NestJS - Atualizado",
  "description": "Incluir Prisma ORM e autentica√ß√£o JWT",
  "status": "IN_PROGRESS",
  "estimatedPomodoros": 6
}

### 8. Deletar tarefa
DELETE {{baseUrl}}/v1/tasks/{{taskId}}
Authorization: Bearer {{accessToken}}

###############################################################################
### ‚è±Ô∏è POMODORO SESSIONS (v1) - Requer autentica√ß√£o JWT
###############################################################################

### 9. Iniciar nova sess√£o pomodoro para uma tarefa
# @name startSession
POST {{baseUrl}}/v1/pomodoro/tasks/{{taskId}}/start-session
Authorization: Bearer {{accessToken}}
Content-Type: application/json

### 10. Buscar sess√£o ativa do usu√°rio
GET {{baseUrl}}/v1/pomodoro/active-session
Authorization: Bearer {{accessToken}}

### 11. Pausar sess√£o ativa
POST {{baseUrl}}/v1/pomodoro/sessions/{{sessionId}}/pause
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "remainingSeconds": 900
}

### 12. Retomar sess√£o pausada
POST {{baseUrl}}/v1/pomodoro/sessions/{{sessionId}}/resume
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "remainingSeconds": 900
}

### 13. Completar sess√£o pomodoro
POST {{baseUrl}}/v1/pomodoro/sessions/{{sessionId}}/complete
Authorization: Bearer {{accessToken}}

### 14. Cancelar sess√£o pomodoro
POST {{baseUrl}}/v1/pomodoro/sessions/{{sessionId}}/cancel
Authorization: Bearer {{accessToken}}

###############################################################################
### üìù FLUXO COMPLETO DE TESTE
###############################################################################

### PASSO 1: Registrar usu√°rio
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "fluxo@example.com",
  "password": "senha123",
  "name": "Teste Fluxo"
}

### PASSO 2: Fazer login (copie o access_token da resposta)
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "fluxo@example.com",
  "password": "senha123"
}

### PASSO 3: Criar tarefa (copie o id da resposta)
POST {{baseUrl}}/v1/tasks
Authorization: Bearer SEU_TOKEN_AQUI
Content-Type: application/json

{
  "title": "Implementar API REST",
  "description": "Criar endpoints com NestJS e Prisma",
  "estimatedPomodoros": 5
}

### PASSO 4: Iniciar sess√£o pomodoro (use o taskId da resposta anterior)
POST {{baseUrl}}/v1/pomodoro/tasks/ID_DA_TASK/start-session
Authorization: Bearer SEU_TOKEN_AQUI

### PASSO 5: Verificar sess√£o ativa
GET {{baseUrl}}/v1/pomodoro/active-session
Authorization: Bearer SEU_TOKEN_AQUI

### PASSO 6: Completar sess√£o (use sessionId da resposta anterior)
POST {{baseUrl}}/v1/pomodoro/sessions/ID_DA_SESSION/complete
Authorization: Bearer SEU_TOKEN_AQUI

### PASSO 7: Ver tarefas agrupadas (status deve ser IN_PROGRESS agora)
GET {{baseUrl}}/v1/tasks/grouped
Authorization: Bearer SEU_TOKEN_AQUI

###############################################################################
### üß™ TESTES ADICIONAIS
###############################################################################

### Testar erro - tarefa n√£o encontrada
GET {{baseUrl}}/v1/tasks/9999
Authorization: Bearer {{accessToken}}

### Testar erro - login com senha errada
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "teste@example.com",
  "password": "senhaErrada"
}

### Testar erro - criar tarefa sem autentica√ß√£o
POST {{baseUrl}}/v1/tasks
Content-Type: application/json

{
  "title": "Tarefa sem auth"
}

### Testar valida√ß√£o - criar tarefa com dados inv√°lidos
POST {{baseUrl}}/v1/tasks
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "",
  "estimatedPomodoros": -1
}